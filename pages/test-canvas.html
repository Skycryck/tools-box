<!DOCTYPE html>
<html  id="haut">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="../css/style.css" />
        <link rel="shortcut icon" href="../images/logo.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Canvas</title>
    </head>
    <style>
        #canvas {
            height: 128px;
            width: 128px;
        }

        #logo-canvas {
            height: 128px;
            width: 256px;
            background-color: orangered;
        }

        #hamb {
            height: 128px;
            width: 128px;
            background-image: url('../images/menu.png');
            margin: 0;
        }

        #canvas, #hamb {
            border-width: 1px;
            border-style: solid;
            border-color: white;
        }
        article {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
    <body>
        <header>
            <a id="logo" href="../index.html"></a>
            <div class="recherche">
                <input id="search" name="q" type="text" placeholder="RECHERCHE" />
                <a href="#" id="search-btn" onclick="rechercher();">Rechercher</a>
            </div>
            <nav class="menu">
                <div class="menu-nv1">
                    <a href="./calculette.html">Calculette</a>
                    <a href="./convertisseur.html">Convertisseur</a>
                    <a href="./ascii.html">Table ASCII</a>
                    <a href="./js.html">Carte bornes</a>
                    <a href="./contact.html">Contact</a>
                </div>
            </nav>
        </header>
        <main>
            <article>
                <h1>Test de canvas</h1>
                <hr width="100%" color="white">
                <canvas id="canvas">
                    Message pour les navigateurs ne supportant pas encore canvas.
                </canvas>
                <div id="hamb"></div>
                <canvas id="logo-canvas"></canvas>
            </article>
        </main>
        <footer>
            <p></p>
            <p>© programing-toolbox.com</p>
            <a href="#haut">haut de page</a>
        </footer>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>

            var canvas = document.querySelector("#canvas");
            var context = canvas.getContext('2d');

            var logo = document.querySelector("#logo-canvas");
            var contextLogo = logo.getContext('2d');

            drawLogo("rgb(165,54,0)");
            drawCanvas("rgb(165,54,0)");

            function drawLogo(color) {
                //Efface le canvas avant de le redessiner
                contextLogo.clearRect(0, 0, logo.width, logo.height);

                contextLogo.fillStyle = color;
                var txt1 = "PROGRAMMING";
                var txt2 = "TOOLS-BOX";

                contextLogo.font = "30pt Anton";
                contextLogo.fillText(txt1, 35, 50);

                contextLogo.font = "42pt Anton";
                contextLogo.fillText(txt2, 35, 120);

                context.beginPath();
                // "<"
                contextLogo.moveTo(30, 10);
                contextLogo.lineTo(10, 65);
                contextLogo.lineTo(30, 120);
                // ">"
                contextLogo.moveTo(265,10);
                contextLogo.lineTo(280, 65);
                contextLogo.lineTo(265, 120);

                contextLogo.lineWidth = 7;
                contextLogo.strokeStyle = color;
                contextLogo.stroke();

                logo.addEventListener("mouseover", hoverLogo, false);
                logo.addEventListener("mouseout", hoverOutLogo, false);
            }

            function hoverLogo(e) {
                drawLogo("white");
            }

            function hoverOutLogo(e) {
                drawLogo("rgb(165,54,0)");
            }

            function drawCanvas(color) {
                context.clearRect(0, 0, canvas.width, canvas.height);
                context.fillStyle = color;
                context.fillRect(40, 25, 220, 20);
                context.fillRect(40, 65, 220, 20);
                context.fillRect(40, 105, 220, 20);

                canvas.addEventListener("mouseover", hover, false);
                canvas.addEventListener("mouseout", hoverOut, false);
            }

            function hover(e) {
                var couleur = "rgb(165,54,0)";
                var r = 165;
                var g = 54;
                var b = 0;

                for(var f = 1; f <= 100; f++) {
                    couleur = colorToString(r,g,b);

                    r = round((255 - r) * (f/100) + r);
                    g = round((255 - g) * (f/100) + g);
                    b = round((255 - b) * (f/100) + b);

                    //Pause
                    sleep(1);
                    drawCanvas(couleur);
                    if(r === 255 && g === 255 && b === 255) //Evite repetition (fin de fonction très long a cause des arrondies)
                        break;
                }
            }

            function hoverOut(e) {
                var couleur = "rgb(255,255,255)";
                var r = 255;
                var g = 255;
                var b = 255;

                for(var f = 1; f <= 100; f++) {
                    couleur = colorToString(r,g,b);

                    r = round((165 - r) * (f/100) + r);
                    g = round((54 - g) * (f/100) + g);
                    b = round((0 - b) * (f/100) + b);

                    //Pause
                    sleep(1);
                    drawCanvas(couleur);
                    if(r === 165 && g === 54 && b === 0) //Evite repetition (fin de fonction très long a cause des arrondies)
                        break;
                }
            }

            function round(number) {
                var factor = Math.pow(10, 0);
                return Math.round(number * factor) / factor;
            }

            function colorToString(r,g,b) {
                return "rgb(" + r.toString() + "," + g.toString() + "," + b.toString() + ")";
            }

            function sleep(miliseconds) {
                var currentTime = new Date().getTime();
                while (currentTime + miliseconds >= new Date().getTime()) {
                }
            }
        </script>
        <script src="../js/scroll.js"></script>
        <script src="../js/recherche.js"></script>
    </body>
</html>
