<!DOCTYPE html>
<html  id="haut">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="../css/style.css" />
        <link rel="shortcut icon" href="../images/logo.png" />
        <title>Canvas</title>
    </head>
    <style>
        #canvas {
            height: 128px;
            width: 128px;
        }
        
        #hamb {
            height: 128px;
            width: 128px;
            background-image: url('../images/menu.png');
            margin: 0;
        }
        
        #canvas, #hamb {
            border-width: 1px;
            border-style: solid;
            border-color: white;
        }
        article {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
    <body>
        <header>
            <a id="logo" href="../index.html"></a>
            <form action="/search" id="searchthis" method="get">
                <input id="search" name="q" type="text" placeholder="RECHERCHER UN OUTILS" />
                <input id="search-btn" type="submit" value="Rechercher" />
            </form>
            <nav class="menu">
                <div class="menu-nv1">
                    <a href="./calculette.html">Calculette</a>
                    <a href="./convertisseur.html">Convertisseur</a>
                    <a href="./ascii.html">Table ASII</a>
                    <a href="./js.html">Carte bornes</a>
                    <a href="./contact.html">Contact</a>
                </div>
            </nav>
        </header>
        <main>
            <article>
                <h1>Test de canvas</h1>
                <hr width="100%" color="white">
                <canvas id="canvas">
                    Message pour les navigateurs ne supportant pas encore canvas.
                </canvas>
                <div id="hamb"></div>
            </article>
        </main>
        <footer>
            <p></p>
            <p>© programing-toolbox.com</p>
            <a href="#haut">haut de page</a>
        </footer>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>
            
            var canvas = document.querySelector("#canvas");
            var context = canvas.getContext('2d');
            
            drawCanvas("rgb(165,54,0)");
            
            function drawCanvas(color) {
                //console.log(color);
                context.fillStyle = color;
                context.fillRect(40, 25, 220, 20);
                context.fillRect(40, 65, 220, 20);
                context.fillRect(40, 105, 220, 20);
                
                canvas.addEventListener("mouseover", hover, false);
                canvas.addEventListener("mouseout", hoverOut, false);
            }
            
            function hover(e) {
                var couleur = "rgb(165,54,0)";
                var r = 165;
                var g = 54;
                var b = 0;
                
                for(var f = 1; f <= 100; f++) {
                    couleur = colorToString(r,g,b);
                    
                    r = round((255 - r) * (f/100) + r);
                    g = round((255 - g) * (f/100) + g);
                    b = round((255 - b) * (f/100) + b);
                    
                    setTimeout(function(){ pause(); }, 1000);
                    drawCanvas(couleur);
                    if(r === 255 && g === 255 && b === 255) //Evite repetition (fin de fonction très long a cause des arrondies)
                        break;
                }
            }
            
            function hoverOut(e) {
                var couleur = "rgb(255,255,255)";
                var r = 255;
                var g = 255;
                var b = 255;
                
                for(var f = 1; f <= 100; f++) {
                    couleur = colorToString(r,g,b);
                    
                    r = round((165 - r) * (f/100) + r);
                    g = round((54 - g) * (f/100) + g);
                    b = round((0 - b) * (f/100) + b);
                    
                    setTimeout(function(){ pause(); }, 1000);
                    drawCanvas(couleur);
                    if(r === 165 && g === 54 && b === 0) //Evite repetition (fin de fonction très long a cause des arrondies)
                        break;
                }
            }
            
            function round(number) {
                var factor = Math.pow(10, 0);
                return Math.round(number * factor) / factor;
            }
            
            function colorToString(r,g,b) {
                return "rgb(" + r.toString() + "," + g.toString() + "," + b.toString() + ")";
            }
            
            function pause() {
                console.log(pause);
            }
            
        </script>
        <script src="../js/scroll.js"></script>
    </body>
</html>